# 生命周期

vue 实例的生命收起大致可以分为 4 个阶段，分别如下：

- 初始化阶段：为 vue 实例初始化一些属性，事件，以及响应式数据
- 模板编译阶段：将模板编译成渲染函数
- 挂在阶段：将实例挂载到指定的`DOM`上，即将模板渲染到真实`DOM`中
- 销毁阶段：将实例自身从父组件中删除，并取消依赖追踪和事件监听器

## 初始化

初始化阶段所做的工作大致分为两部分：第一部分是`new vue()`，也就是创建一个`vue`实例；第二部分就是为创建好的`vue`实例初始化一些事件、属性、响应式数据等

`new vue()`阶段：

- 检查当前实例是否通过`new`关键字初始化的
- 调用原型链上面`_init`方法，进行初始化，这个方法是在`initMixin`函数中添加上去的
    - 将`vue`实例赋值给`vm`，并且吧用户传递的`options`选项和当前构造函数的`options`属性，以及父级构造函数造函数的`options`属性进行合并，得到一个新的属性，并挂载到`vm.$options`上
    - 通过调用一些初始化函数来`vue`实例初始化一些属性，事件，响应式数据等
        - 初始化生命周期：挂载一些属性，$parent,$root,$children等
        - 初始化事件相关：将父组件向子组件注册的事件注册到子组件的实例中
        - 初始化渲染相关的：$slots，$scopedSlots，createElement，$attrs，$listeners等数据
        - 调用`beforeCreate`生命周期函数
        - 初始化inject
        - 初始化data，props，methods，computed，watch
        - 初始化provide 
        - 调用生命周期
    - 所有初始化工作完成之后，最后，会判断用户是否传入了`el`选项，如果传入了，则调用`$mounted`函数进入模板编译和挂载阶段。如果没有传入，则不进入下一个生命周期阶段，需要用户手动调用`$mounted`函数才会进入到下一个生命周期阶段
