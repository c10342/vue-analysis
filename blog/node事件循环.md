# 事件循环

node的事件循环分成六个阶段

- 定时器检测阶段：执行settimeout、setinterval回调函数

- io事件回调阶段：执行延迟到下一个循环的io回调，即上一轮循环中未被执行的io回调

- 闲置阶段：仅系统内部使用

- 轮询阶段：检索新的io事件，执行与io相关的回调

- 检查阶段：setimmediate回调函数在这里执行

- 关闭事件回调阶段：一些关闭的回调函数，比如socket的关闭事件回调函数

每个阶段对应一个队列，当事件循环进入到某个阶段时，将会在该阶段执行回调，知道队列耗尽或者回调的最大数量以执行，那么将进入到下一个处理阶段。除了上述6个阶段还存在，process.nexttick，其不属于事件循环的任何一个阶段，他是在一次事件循环之后，下一次事件循环之前执行的